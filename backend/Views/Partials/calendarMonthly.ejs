<div class="monthly-cal calendar">
  <div style="display:flex;justify-content:space-between;align-items:center;margin:8px 0;">
    <h2 style="margin:0;">Monthly — <%= monthLabel %></h2>
    <div>
      <a href="/staff/calendar/monthly?month=<%= prevMonth %>">◀ <%= prevMonth %></a>
      <a href="/staff/calendar/monthly?month=<%= nextMonth %>" style="margin-left:8px;"><%= nextMonth %> ▶</a>
    </div>
  </div>

  <div class="grid">
    <% (days || []).forEach(d => { 
         const list = (events && events[d.dateKey]) || []; %>
      <div class="cell <%= d.isOtherMonth ? 'other' : '' %> <%= d.isToday ? 'today' : '' %>">
        <div class="head"><%= d.dateStr %></div>
        <% if (!list.length) { %>
          <div class="muted">—</div>
        <% } else { %>
          <ul style="margin:0;padding-left:16px;">
            <% list.forEach(ev => { %>
              <% if (ev.evtype === 'booking') { %>
                <!-- Greyed booking -->
                <li class="ev bk">
                  <span class="i bk">Booking</span>
                  <a href="/bookings/<%= ev.id %>" class="muted">
                    <strong><%= ev.name %></strong>
                  </a>
                  <% if (ev.type) { %> · <%= ev.type %><% } %>
                  <% if (ev.guests) { %> · <%= ev.guests %> pax<% } %>
                  <% if (ev.status) { %> · <%= ev.status %><% } %>
                </li>
              <% } else { %>
                <!-- Function -->
                <li class="ev fn">
                  <span class="i fn">Function</span>
                  <a href="/api/functions/<%= ev.id %>/edit">
                    <strong><%= ev.event_name %></strong>
                  </a>
                  <% if (ev.room) { %> — <%= ev.room %><% } %>
                  <% if (ev.attendees) { %> · <%= ev.attendees %> pax<% } %>
                </li>
              <% } %>
            <% }) %>
          </ul>
        <% } %>
      </div>
    <% }) %>
  </div>
</div>


<%- include('../Partials/calendarModal') %>

